(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,c){},101:function(e,t,c){},102:function(e,t,c){},103:function(e,t,c){},104:function(e,t,c){},203:function(e,t,c){},204:function(e,t,c){},205:function(e,t,c){},206:function(e,t,c){},207:function(e,t,c){},208:function(e,t,c){},209:function(e,t,c){},210:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),r=c(83),s=c.n(r),i=c(3),o=c(2),l=(c(93),c(94),c(0)),j=function(){return Object(l.jsxs)("aside",{className:"aside-menu",children:[Object(l.jsx)("div",{children:Object(l.jsx)("img",{src:"../../logo192.png",alt:""})}),Object(l.jsxs)("nav",{children:[Object(l.jsx)(i.b,{to:"/categories/home",children:"Home"}),Object(l.jsx)(i.b,{to:"/categories/music",children:"Music"}),Object(l.jsx)(i.b,{to:"/categories/gaming",children:"Gaming"}),Object(l.jsx)(i.b,{to:"/categories/other",children:"Other"})]})]})},u=c(4),b=c(5),d=c(8),h=c(10),m=(c(100),function(e){Object(d.a)(c,e);var t=Object(h.a)(c);function c(){return Object(u.a)(this,c),t.apply(this,arguments)}return Object(b.a)(c,[{key:"render",value:function(){return this.props.loggedIn?Object(l.jsx)("header",{className:"site-header",children:Object(l.jsx)("nav",{children:Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{children:Object(l.jsx)(i.b,{to:"/article/create",children:"Create Article"})}),Object(l.jsx)("li",{children:Object(l.jsxs)("span",{children:["Welcome, ",Object(l.jsx)(i.b,{to:"/profile",children:this.props.username}),"!"]})}),Object(l.jsx)("li",{children:Object(l.jsx)(i.b,{to:"/logout",children:"Logout"})})]})})}):Object(l.jsx)("header",{className:"site-header",children:Object(l.jsx)("nav",{children:Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{children:Object(l.jsx)(i.b,{to:"/login",children:"Login"})}),Object(l.jsx)("li",{children:Object(l.jsx)(i.b,{to:"/register",children:"Register"})})]})})})}}]),c}(n.Component)),O=(c(101),c(7)),g=(c(102),function(e){var t=e.title,c=e.content,n=e._id;return Object(l.jsxs)("article",{className:"home-article",children:[Object(l.jsx)("h3",{children:Object(l.jsx)(i.b,{to:"/article/details/".concat(n),children:t})}),Object(l.jsxs)("p",{className:"description",children:[Object(l.jsx)("span",{children:c&&c.slice(0,150)}),"\u2026",Object(l.jsx)(i.b,{className:"read-more",to:"/article/details/".concat(n),children:"read more"})]})]})}),p=(c(103),function(e){var t=e.message;return Object(l.jsx)("div",{className:"error-message",children:Object(l.jsx)("span",{children:t})})}),x=(c(104),function(e){var t=e.message;return Object(l.jsx)("div",{className:"success-message",children:Object(l.jsx)("span",{children:t})})}),f=function(e){var t=e.articles,c=e.category,n=e.onSubmitError,a=e.onSucessMessage;return Object(l.jsxs)("section",{children:[n.message.length>0&&Object(l.jsx)(p,{message:n.message}),"logged in"===a.type&&Object(l.jsx)(x,{message:"Login successful!"}),"article created"===a.type&&Object(l.jsx)(x,{message:"Article created!"}),"article deleted"===a.type&&Object(l.jsx)(x,{message:"Article deleted!"}),"home"===c?Object(l.jsx)("h2",{children:"Latest articles"}):Object(l.jsx)("h2",{children:c.charAt(0).toUpperCase()+c.slice(1)}),t.map((function(e){return Object(l.jsx)(g,{title:e.title,content:e.content,author:e.author,date:e.date,_id:e._id},e._id)}))]})},v=a.a.createContext(),y="http://localhost/api/articles",S=function(e,t,c){var n=localStorage.auth,a={"Content-Type":"application/json",Authorization:"Bearer ".concat(n)};return c&&delete a["Content-Type"],{method:e,headers:a,body:c?t:JSON.stringify(t)}},w={create:function(e){return fetch(y,S("POST",e,!0)).then((function(e){return e.json()}))},getAll:function(e){return fetch("".concat(y,"/category/").concat(e)).then((function(e){return e.json()}))},getOne:function(e){return fetch("".concat(y,"/").concat(e)).then((function(e){return e.json()}))},postComment:function(e){return fetch("".concat(y,"/comments"),S("POST",e,!1)).then((function(e){return e.json()}))},update:function(e,t,c){return fetch("".concat(y,"/").concat(e,"/edit"),S("PATCH",t,c)).then((function(e){return e.json()}))},remove:function(e){return fetch("".concat(y,"/").concat(e,"/delete"),S("DELETE",{},!1)).then((function(e){return e.json()}))}},C=function(e,t){e(t),setTimeout((function(){e({message:""})}),3e3)},U=function(e,t){return setTimeout((function(){e({state:!1,type:""})}),t)},k=function(e){var t=e.match,c=e.location,a=Object(n.useContext)(v).loggedInStateHandler,r=Object(n.useState)([]),s=Object(o.a)(r,2),i=s[0],j=s[1],u=Object(n.useState)("home"),b=Object(o.a)(u,2),d=b[0],h=b[1],m=Object(n.useState)({message:""}),O=Object(o.a)(m,2),g=O[0],p=O[1],x=Object(n.useState)({state:!!c.message&&c.message.state,type:c.message?c.message.type:""}),y=Object(o.a)(x,2),S=y[0],k=y[1];return Object(n.useEffect)((function(){localStorage.auth&&a();var e=U(k,3e3);return function(){return clearTimeout(e)}}),[]),Object(n.useEffect)((function(){w.getAll(d).then((function(e){if(e.err)throw e.err;j(e.articles)})).catch((function(e){return C(p,e)}))}),[d]),Object(n.useEffect)((function(){t.params.category!==d&&h(t.params.category)})),i.length>0?Object(l.jsx)(f,{articles:i,category:d,onSubmitError:g,onSucessMessage:S}):Object(l.jsx)("p",{children:"There are no articles in this section. Be the first to create one!"})},N=c(13),T=c(11),I="http://localhost/api/auth",E={register:"".concat(I,"/register"),login:"".concat(I,"/login"),validateToken:"".concat(I,"/validate-token")},L=function(e){return{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}},A={register:function(e){var t=e.username,c=e.password;return fetch(E.register,L({username:t,password:c})).then((function(e){return e.json()}))},login:function(e){var t=e.username,c=e.password;return fetch(E.login,L({username:t,password:c})).then((function(e){return e.json()}))},validateToken:function(e){return fetch(E.validateToken,{method:"GET",headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()}))}},q=c(18),F=c(46),H=function(e){var t=e.label,c=Object(F.a)(e,["label"]),n=Object(N.c)(c),a=Object(o.a)(n,2),r=a[0],s=a[1];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("label",{htmlFor:c.id||c.name,children:t}),Object(l.jsx)("input",Object(q.a)(Object(q.a)({},r),c)),s.touched&&s.error?Object(l.jsx)("div",{style:{color:"red"},children:s.error}):null]})},P=function(e){var t=e.label,c=Object(F.a)(e,["label"]),n=Object(N.c)(c),a=Object(o.a)(n,2),r=a[0],s=a[1];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("label",{htmlFor:c.id||c.name,children:t}),Object(l.jsx)("textarea",Object(q.a)(Object(q.a)({},r),c)),s.touched&&s.error?Object(l.jsx)("div",{style:{color:"red"},children:s.error}):null]})},_=function(e){var t=e.label,c=Object(F.a)(e,["label"]),n=Object(N.c)(c),a=Object(o.a)(n,2),r=a[0],s=a[1];return Object(l.jsxs)("div",{children:[Object(l.jsx)("label",{htmlFor:c.id||c.name,children:t}),Object(l.jsx)("select",Object(q.a)(Object(q.a)({},r),c)),s.touched&&s.error?Object(l.jsx)("div",{style:{color:"red"},children:s.error}):null]})},D=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)({message:""}),s=Object(o.a)(r,2),i=s[0],j=s[1];return c?Object(l.jsx)(O.a,{to:{pathname:"/login",message:{state:!0,type:"registered"}}}):Object(l.jsx)(N.b,{initialValues:{username:"",password:"",repeatPassword:""},validationSchema:T.a({username:T.b().required("Username is required!").min(4,"Username needs to be at least 4 characters long!"),password:T.b().required("Password is required!").min(6,"Password needs to be at least 6 characters long!"),repeatPassword:T.b().required("Repeat Password is required!").test("passwords-match","Passwords should match!",(function(e){return this.parent.password===e}))}),onSubmit:function(e){A.register(e).then((function(e){if(e.err)throw e.err;a(!0)})).catch((function(e){return C(j,e)}))},children:Object(l.jsxs)("section",{children:[i.message.length>0?Object(l.jsx)(p,{message:i.message}):null,Object(l.jsx)("h2",{children:"Register"}),Object(l.jsx)("div",{children:Object(l.jsxs)(N.a,{children:[Object(l.jsx)(H,{label:"Username:",name:"username",type:"text"}),Object(l.jsx)(H,{label:"Password:",name:"password",type:"password"}),Object(l.jsx)(H,{label:"Repeat Password:",name:"repeatPassword",type:"password"}),Object(l.jsx)("input",{type:"submit",value:"Register"})]})})]})})},V=function(e){var t=e.location,c=Object(n.useState)(!1),a=Object(o.a)(c,2),r=a[0],s=a[1],i=Object(n.useState)({message:""}),j=Object(o.a)(i,2),u=j[0],b=j[1],d=Object(n.useState)({state:!!t.message&&t.message.state,type:t.message?t.message.type:""}),h=Object(o.a)(d,2),m=h[0],g=h[1];return Object(n.useEffect)((function(){var e=U(g,3e3);return function(){return clearTimeout(e)}}),[]),r?Object(l.jsx)(O.a,{to:{pathname:"/categories/home",message:{state:!0,type:"logged in"}}}):Object(l.jsx)(N.b,{initialValues:{username:"",password:""},validationSchema:T.a({username:T.b().required("Username is required!"),password:T.b().required("Password is required!")}),onSubmit:function(e){A.login(e).then((function(e){if(e.err)throw e.err;localStorage.setItem("user",e.username),localStorage.setItem("auth",e.token),setTimeout((function(){s(!0)}),20)})).catch((function(e){return C(b,e)}))},children:Object(l.jsxs)("section",{children:[u.message.length>0&&Object(l.jsx)(p,{message:u.message}),m.state&&Object(l.jsx)(x,{message:"Successfully registered!"}),Object(l.jsx)("h2",{children:"Login"}),Object(l.jsx)("div",{children:Object(l.jsxs)(N.a,{children:[Object(l.jsx)(H,{label:"Username:",name:"username",type:"text"}),Object(l.jsx)(H,{label:"Password:",name:"password",type:"password"}),Object(l.jsx)("input",{type:"submit",value:"Login"})]})})]})})},R=function(){return Object(l.jsx)("section",{children:Object(l.jsx)("h2",{children:"Whoops.. There is nothing here!"})})},M=function(){var e=Object(n.useContext)(v).loggedOutStateHandler;return localStorage.clear(),setTimeout((function(){e()}),20),Object(l.jsx)(O.a,{to:"/login"})},B=(c(203),c(204),[{value:"music",label:"Music"},{value:"gaming",label:"Gaming"},{value:"other",label:"Other"}]),J=function(e){var t=e.setFieldValue,c=e.values;return Object(l.jsxs)(N.a,{className:"article-form",children:[Object(l.jsx)(H,{label:"Title:",name:"title",type:"text",placeholder:"Title.."}),Object(l.jsx)(P,{label:"Content:",name:"content",placeholder:"Description.."}),Object(l.jsx)(_,{label:"Category:",name:"category",children:B.map((function(e){return Object(l.jsx)("option",{value:e.value,children:e.label},e.value)}))}),Object(l.jsx)("label",{htmlFor:"image",children:c?"Change your image:":"Upload an image (optional):"}),c&&c.imageUrl&&Object(l.jsx)("img",{src:c.imageUrl,alt:""}),Object(l.jsx)("input",{id:"image",name:"image",type:"file",onChange:function(e){t("image",e.currentTarget.files[0])}}),Object(l.jsx)(H,{label:"Youtube URL (optional):",name:"youtubeUrl",type:"text",placeholder:"https://"}),Object(l.jsx)("input",{type:"submit",value:"Submit"})]})},z=function(){var e=Object(n.useState)({message:""}),t=Object(o.a)(e,2),c=t[0],a=t[1],r=Object(n.useContext)(v),s=r.username,i=r.loggedInStateHandler,j=Object(O.g)();return Object(n.useEffect)((function(){localStorage.auth&&i()}),[]),Object(l.jsx)(N.b,{initialValues:{title:"",content:"",category:"music",youtubeUrl:"",author:s,image:null},validationSchema:T.a({title:T.b().required("Title is required!"),content:T.b().required("Content is required!"),youtubeUrl:T.b().url("Invalid URL!")}),onSubmit:function(e){var t=new FormData;t.append("title",e.title),t.append("content",e.content),t.append("category",e.category),t.append("youtubeUrl",e.youtubeUrl),t.append("author",e.author),t.append("image",e.image),w.create(t).then((function(e){if(e.err)throw e.err;j.push({pathname:"/categories/home",message:{state:!0,type:"article created"}})})).catch((function(e){return C(a,e)}))},children:function(e){var t=e.setFieldValue;return Object(l.jsxs)("section",{className:"create-article",children:[c.message.length>0&&Object(l.jsx)(p,{message:c.message}),Object(l.jsx)("h2",{children:"Create new article"}),Object(l.jsx)("div",{children:Object(l.jsx)(J,{setFieldValue:t})})]})}})},G=(c(205),function(e){var t=e._id,c=e.title,a=e.imageUrl,r=e.youtubeUrl,s=e.content,o=e.author,j=e.date,u=e.hasLiked,b=e.likes,d=e.onLikeArticleHandler,h=Object(n.useContext)(v).username,m=a||r?"300px":"0px";return Object(l.jsxs)("article",{children:[Object(l.jsx)("h3",{children:c}),h===o&&Object(l.jsxs)("div",{className:"user-control",children:[Object(l.jsx)(i.b,{className:"user-btn",to:"/article/edit/".concat(t),children:"[Edit]"}),Object(l.jsx)(i.b,{className:"user-btn",to:"/article/delete/".concat(t),children:"[Delete]"})]}),Object(l.jsxs)("div",{className:"visual-section",style:{height:m},children:[a&&Object(l.jsx)("img",{src:a,alt:""}),r&&Object(l.jsx)("iframe",{width:"500",height:"281",src:r,title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})]}),s.split("\n\n").map((function(e,t){return Object(l.jsx)("p",{className:"description",children:e},t)})),Object(l.jsxs)("div",{className:"article-info",children:[Object(l.jsxs)("span",{className:"author-name",children:["Published by ",Object(l.jsx)("strong",{children:o})]}),!h&&Object(l.jsxs)("span",{className:"cannot-like-article",children:[b," ",Object(l.jsx)("span",{children:"\u2764"})]}),u?h&&Object(l.jsxs)("span",{className:"cannot-like-article",children:[b," ",Object(l.jsx)("span",{children:"\u2764"})]}):h&&Object(l.jsxs)("span",{className:"can-like-article",children:["Click on the heart!",Object(l.jsx)("span",{onClick:d,children:"\u2764"}),"We have ",b," hearts!"]}),Object(l.jsx)("p",{children:Object(l.jsx)("time",{dateTime:j,children:j})})]})]})}),W=(c(206),function(e){var t=e._id,c=e.name,n=e.comment,a=e.date,r=e.number;return Object(l.jsxs)("div",{id:t,className:"comment-box",children:[Object(l.jsx)("var",{className:"comment-number",children:r}),Object(l.jsx)("div",{className:"comment-name",children:c}),Object(l.jsx)("time",{className:"comment-date",dateTime:a,children:a}),Object(l.jsx)("p",{className:"comment-description",children:n})]})}),Y=function(e){var t=e._id,c=e.title,n=e.content,a=e.imageUrl,r=e.youtubeUrl,s=e.author,i=e.date,o=e.hasLiked,j=e.likes,u=e.comments,b=e.onCommentSubmitHandler,d=e.onLikeArticleHandler;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(G,{_id:t,title:c,content:n,imageUrl:a,youtubeUrl:r,author:s,date:i,hasLiked:o,likes:j,onLikeArticleHandler:d}),Object(l.jsx)("h4",{children:"Comments"}),Object(l.jsx)("div",{children:u.map((function(e){return Object(l.jsx)(W,{_id:e._id,name:e.name,comment:e.comment,date:e.date,number:e.number},e._id)}))}),Object(l.jsxs)("form",{onSubmit:b,children:[Object(l.jsx)("label",{htmlFor:"comment",children:"Comment: "}),Object(l.jsx)("textarea",{name:"comment",id:"comment",cols:"30",rows:"8"}),Object(l.jsx)("input",{type:"submit",value:"Add comment"})]})]})},K=function(e){var t=e.match,c=e.location,a=Object(n.useContext)(v),r=a.loggedIn,s=a.username,i=a.loggedInStateHandler,j=Object(n.useState)(""),u=Object(o.a)(j,2),b=u[0],d=u[1],h=Object(n.useState)(""),m=Object(o.a)(h,2),O=m[0],g=m[1],f=Object(n.useState)(""),y=Object(o.a)(f,2),S=y[0],k=y[1],N=Object(n.useState)(""),T=Object(o.a)(N,2),I=T[0],E=T[1],L=Object(n.useState)(""),A=Object(o.a)(L,2),q=A[0],F=A[1],H=Object(n.useState)(""),P=Object(o.a)(H,2),_=P[0],D=P[1],V=Object(n.useState)([]),R=Object(o.a)(V,2),M=R[0],B=R[1],J=Object(n.useState)(0),z=Object(o.a)(J,2),W=z[0],K=z[1],Q=Object(n.useState)(""),X=Object(o.a)(Q,2),Z=X[0],$=X[1],ee=Object(n.useState)([]),te=Object(o.a)(ee,2),ce=te[0],ne=te[1],ae=Object(n.useState)(""),re=Object(o.a)(ae,2),se=re[0],ie=re[1],oe=Object(n.useState)({message:""}),le=Object(o.a)(oe,2),je=le[0],ue=le[1],be=Object(n.useState)({state:!!c.message&&c.message.state,type:c.message?c.message.type:""}),de=Object(o.a)(be,2),he=de[0],me=de[1];Object(n.useEffect)((function(){localStorage.auth&&i();var e=U(me,3e3);return function(){return clearTimeout(e)}}),[]),Object(n.useEffect)((function(){var e=t.params.articleId;w.getOne(e).then((function(e){if(e.err)throw e.err;var t=e._id,c=e.title,n=e.content,a=e.imageUrl,r=e.youtubeUrl,s=e.author,i=e.date,o=e.usersLiked,l=e.likes,j=e.comments,u=i.split("T"),b=u[0].split("-"),h="".concat(b[2],"/").concat(b[1],"/").concat(b[0])+" "+u[1].slice(0,5);d(c),g(n),k(a),E(r),F(s),D(h),B(o),K(l),$(t),ne(j)})).catch((function(e){return C(ue,e)}))}),[se,W]);var Oe=!!M.includes(s);return r?Object(l.jsxs)("section",{className:"details-article",children:[je.message.length>0&&Object(l.jsx)(p,{message:je.message}),he.state&&Object(l.jsx)(x,{message:"Article updated!"}),Object(l.jsx)(Y,{_id:Z,title:b,content:O,imageUrl:S,youtubeUrl:I,author:q,date:_,hasLiked:Oe,likes:W,comments:ce,onCommentSubmitHandler:function(e){e.preventDefault();var t=s,c=e.target.comment.value;w.postComment({articleId:Z,name:t,comment:c}).then((function(t){if(t.err)throw t.err;ie(t._id),e.target.comment.value=""})).catch((function(e){return C(ue,e)}))},onLikeArticleHandler:function(){Oe||(M.push(s),w.update(Z,{likes:W+1,usersLiked:M},!1).then((function(e){if(e.err)throw e.err;K((function(e){return e+1}))})).catch((function(e){return C(ue,e)})))}})]}):Object(l.jsx)("section",{className:"details-article",children:Object(l.jsx)(G,{title:b,content:O,imageUrl:S,youtubeUrl:I,author:q,date:_,likes:W})})},Q=function(e){var t=e.match,c=Object(n.useContext)(v).loggedInStateHandler,a=Object(n.useState)(""),r=Object(o.a)(a,2),s=r[0],i=r[1],j=Object(n.useState)(""),u=Object(o.a)(j,2),b=u[0],d=u[1],h=Object(n.useState)(""),m=Object(o.a)(h,2),g=m[0],x=m[1],f=Object(n.useState)(""),y=Object(o.a)(f,2),S=y[0],U=y[1],k=Object(n.useState)(""),I=Object(o.a)(k,2),E=I[0],L=I[1],A=Object(n.useState)(!1),q=Object(o.a)(A,2),F=q[0],H=q[1],P=Object(n.useState)(!1),_=Object(o.a)(P,2),D=_[0],V=_[1],R=Object(n.useState)({message:""}),M=Object(o.a)(R,2),B=M[0],z=M[1];return Object(n.useEffect)((function(){c();var e=t.params.articleId;w.getOne(e).then((function(e){if(e.err)throw e.err;var t=e.title,c=e.content,n=e.category,a=e.imageUrl,r=e.youtubeUrl;r=r.replace("embed/","watch?v="),i(t),d(c),x(n),U(a),L(r),V(!0)})).catch((function(e){return C(z,e)}))}),[]),F?Object(l.jsx)(O.a,{to:{pathname:"/article/details/".concat(t.params.articleId),message:{state:!0,type:"article updated"}}}):D?Object(l.jsx)(N.b,{initialValues:{title:s,content:b,category:g,imageUrl:S,youtubeUrl:E,image:null},validationSchema:T.a({title:T.b().required("Title is required!"),content:T.b().required("Content is required!"),youtubeUrl:T.b().url("Invalid URL!")}),onSubmit:function(e){var c=new FormData;c.append("title",e.title),c.append("content",e.content),c.append("category",e.category),c.append("imageUrl",e.imageUrl),c.append("youtubeUrl",e.youtubeUrl),c.append("image",e.image);var n=t.params.articleId;w.update(n,c,!0).then((function(e){if(e.err)throw e.err;H(!0)})).catch((function(e){return C(z,e)}))},children:function(e){var t=e.setFieldValue,c=e.values;return Object(l.jsxs)("section",{className:"edit-article",children:[B.message.length>0&&Object(l.jsx)(p,{message:B.message}),Object(l.jsx)("h2",{children:"Edit your article"}),Object(l.jsx)("div",{children:Object(l.jsx)(J,{setFieldValue:t,values:c})})]})}}):null},X=(c(207),function(e){var t=e.match,c=Object(n.useContext)(v).loggedInStateHandler,a=t.params.articleId,r=Object(n.useState)(!1),s=Object(o.a)(r,2),j=s[0],u=s[1],b=Object(n.useState)({message:""}),d=Object(o.a)(b,2),h=d[0],m=d[1];Object(n.useEffect)((function(){c()}),[]);return j?Object(l.jsx)(O.a,{to:{pathname:"/categories/home",message:{state:!0,type:"article deleted"}}}):Object(l.jsxs)("section",{className:"article-delete",children:[h.message.length>0&&Object(l.jsx)(p,{message:h.message}),Object(l.jsx)("h3",{children:"Are you sure you want to delete your article?"}),Object(l.jsx)(i.b,{to:"/article/details/".concat(a),children:"Back"}),Object(l.jsx)("a",{onClick:function(){w.remove(a).then((function(e){if(e.err)throw e.err;u(!0)})).catch((function(e){return C(m,e)}))},children:"Delete"})]})}),Z=(c(208),{getUserInfo:function(e){var t=localStorage.auth;return fetch("".concat("http://localhost/api/users","/").concat(e),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()}))}}),$=function(){var e=Object(n.useContext)(v),t=e.username,c=e.loggedInStateHandler,a=Object(n.useState)(0),r=Object(o.a)(a,2),s=r[0],j=r[1],u=Object(n.useState)([]),b=Object(o.a)(u,2),d=b[0],h=b[1],m=Object(n.useState)({message:""}),O=Object(o.a)(m,2),g=O[0],x=O[1];return Object(n.useEffect)((function(){localStorage.auth&&c(),Z.getUserInfo(t).then((function(e){if(e.err)throw e.err;var t=e.comments,c=e.createdArticles;j(t.length),h(c)})).catch((function(e){return C(x,e)}))}),[]),Object(l.jsxs)("section",{className:"user-profile",children:[g.message.length>0&&Object(l.jsx)(p,{message:g.message}),Object(l.jsx)("i",{className:"material-icons",children:"account_circle"}),Object(l.jsx)("h4",{children:"My articles"}),Object(l.jsx)("ul",{children:d.map((function(e){return Object(l.jsx)("li",{children:Object(l.jsx)(i.b,{to:"/article/details/".concat(e._id),children:e.title})},e._id)}))}),Object(l.jsx)("h4",{children:"Comments count"}),Object(l.jsx)("span",{children:s})]})},ee=function(e){Object(d.a)(c,e);var t=Object(h.a)(c);function c(e){var n;return Object(u.a)(this,c),(n=t.call(this,e)).state={hasError:!1},n}return Object(b.a)(c,[{key:"componentDidCatch",value:function(e){console.log("Error from componentDidCatch: ",e)}},{key:"render",value:function(){return this.state.hasError?Object(l.jsx)("h1",{children:"Looks like something went wrong!"}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),c}(a.a.Component),te=function(e){return function(t){var c=Object(n.useContext)(v).loggedIn,a=Object(O.g)();return c?Object(l.jsx)(e,Object(q.a)({},t)):(a.push("/login"),null)}},ce=function(e){return function(t){var c=Object(n.useContext)(v).loggedIn,a=Object(O.g)();return c?(setTimeout((function(){a.push("/categories/home")}),20),null):Object(l.jsx)(e,Object(q.a)({},t))}},ne=function(e){Object(d.a)(c,e);var t=Object(h.a)(c);function c(){return Object(u.a)(this,c),t.apply(this,arguments)}return Object(b.a)(c,[{key:"render",value:function(){return Object(l.jsx)("main",{className:"main-wrapper",children:Object(l.jsx)(ee,{children:Object(l.jsxs)(O.d,{children:[Object(l.jsx)(O.b,{path:"/",exact:!0,children:Object(l.jsx)(O.a,{to:"/categories/home"})}),Object(l.jsx)(O.b,{path:"/categories/:category",component:k}),Object(l.jsx)(O.b,{path:"/article/create",component:te(z)}),Object(l.jsx)(O.b,{path:"/article/details/:articleId",component:K}),Object(l.jsx)(O.b,{path:"/article/edit/:articleId",component:te(Q)}),Object(l.jsx)(O.b,{path:"/article/delete/:articleId",component:te(X)}),Object(l.jsx)(O.b,{path:"/profile",component:te($)}),Object(l.jsx)(O.b,{path:"/register",component:ce(D)}),Object(l.jsx)(O.b,{path:"/login",component:ce(V)}),Object(l.jsx)(O.b,{path:"/logout",component:te(M)}),Object(l.jsx)(O.b,{component:R})]})})})}}]),c}(n.Component),ae=(c(209),function(){return Object(l.jsx)("footer",{children:Object(l.jsx)("p",{children:"All rights reserved. \xa9 | Mihail Tomov"})})}),re=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)(""),s=Object(o.a)(r,2),i=s[0],u=s[1];Object(n.useEffect)((function(){b()}),[]);var b=function(){var e=localStorage.auth;e&&A.validateToken(e).then((function(e){e.err?(localStorage.clear(),d()):(a(!0),u(localStorage.user))}))},d=function(){a(!1),u("")},h={loggedIn:c,username:i,loggedInStateHandler:b,loggedOutStateHandler:d};return Object(l.jsxs)("div",{className:"site-wrapper",children:[Object(l.jsx)(j,{}),Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)(m,{loggedIn:c,username:i}),Object(l.jsx)(v.Provider,{value:h,children:Object(l.jsx)(ne,{})}),Object(l.jsx)(ae,{})]})]})};s.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(i.a,{children:Object(l.jsx)(re,{})})}),document.getElementById("root"))},93:function(e,t,c){},94:function(e,t,c){}},[[210,1,2]]]);
//# sourceMappingURL=main.251dfb5b.chunk.js.map